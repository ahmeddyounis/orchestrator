Goal: Goal
Queries: Goal
Stats: 3 candidates, 3 selected, 0 excluded
Estimated Tokens: 743

--- Selected Context ---
File: packages/cli/src/output/renderer.ts (10-40)
Reason: search-match (Score: 12.50)
---
}

export class OutputRenderer {
  constructor(private isJson: boolean) {}

  render(data: OutputResult): void {
    if (this.isJson) {
      console.log(JSON.stringify(data, null, 2));
    } else {
      this.renderHuman(data);
    }
  }

  private renderHuman(data: OutputResult): void {
    if (data.status) console.log(`Status: ${data.status}`);
    if (data.goal) console.log(`Goal: ${data.goal}`);
    if (data.suite) console.log(`Suite: ${data.suite}`);
    if (data.runId) console.log(`Run ID: ${data.runId}`);
    if (data.artifactsDir) console.log(`Artifacts: ${data.artifactsDir}`);

    if (data.providers) {
      const activeProviders = Object.entries(data.providers).filter(([, provider]) => !!provider);

      if (activeProviders.length > 0) {
        console.log('Selected Providers:');
        activeProviders.forEach(([role, provider]) => {
          console.log(`  - ${role}: ${provider}`);
        });
      }
    }

---

File: packages/core/src/orchestrator.ts (557-587)
Reason: search-match (Score: 13.00)
---
            const extractor = new SnippetExtractor();
            const candidates = await extractor.extractSnippets(
                [...searchResults.matches, ...extraMatches], 
                { cwd: this.repoRoot }
            );

            const packer = new SimpleContextPacker();
            contextPack = packer.pack(step, [], candidates, { 
                tokenBudget: this.config.context?.tokenBudget || 8000 
            });

        } catch {
             // Ignore context errors
        }

        let contextText = `Goal: ${goal}\nCurrent Step: ${step}\n`;
        if (contextPack) {
             const stepSlug = step.slice(0, 20).replace(/[^a-z0-9]/gi, '_');
             const packFilename = `context_pack_step_${stepsCompleted}_${stepSlug}.json`;
             const packPath = path.join(artifacts.root, packFilename);
             await fs.writeFile(packPath, JSON.stringify(contextPack, null, 2));
             contextPaths.push(packPath);

             let formattedContext = 
... (truncated)
---

File: packages/core/src/plan/service.ts (136-190)
Reason: search-match (Score: 12.50)
---
        queries,
        pack: contextPack,
        stats: {
          candidatesFound: candidates.length,
          itemsSelected: contextPack.items.length,
          itemsExcluded: excludedCount,
        },
      };

      await fs.writeFile(
        path.join(artifactsDir, 'context_pack.json'),
        JSON.stringify(provenance, null, 2),
      );

      // Human readable report
      let readableReport = `Goal: ${goal}\n`;
      readableReport += `Queries: ${queries.join(', ')}\n`;
      readableReport += `Stats: ${candidates.length} candidates, ${contextPack.items.length} selected, ${excludedCount} excluded\n`;
      readableReport += `Estimated Tokens: ${contextPack.estimatedTokens}\n\n`;
      readableReport += `--- Selected Context ---\n`;

      for (const item of contextPack.items) {
        readableReport += `File: ${item.path} (${item.startLine}-${item.endLine})\n`;
        readableReport += `Reason: ${item.reason} (Score: ${item.score.toFixed(2)})\n`;
        readableRepor
... (truncated)
---

